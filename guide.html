<!DOCTYPE html>
<html lang="ro">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ABC-ul Implementarii</title>
    <script src="https://unpkg.com/react@18/umd/react.production.min.js" crossorigin></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js" crossorigin></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet">
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    fontFamily: { sans: ['Inter', 'system-ui', 'sans-serif'] },
                    colors: {
                        brand: { 50:'#FFF7ED', 100:'#FFEDD5', 200:'#FED7AA', 300:'#FDBA74', 400:'#FB923C', 500:'#F97316', 600:'#EA580C', 700:'#C2410C' },
                        surface: { 0:'#FFFFFF', 50:'#F8FAFC', 100:'#F1F5F9', 200:'#E2E8F0', 300:'#CBD5E1' },
                        ink: { 900:'#0F172A', 800:'#1E293B', 700:'#334155', 500:'#64748B', 400:'#94A3B8', 300:'#CBD5E1' },
                    },
                    boxShadow: {
                        card: '0 1px 3px rgba(0,0,0,0.06), 0 1px 2px rgba(0,0,0,0.04)',
                        cardHover: '0 10px 25px rgba(0,0,0,0.08), 0 4px 10px rgba(0,0,0,0.04)',
                        soft: '0 4px 14px rgba(0,0,0,0.05)',
                    }
                }
            }
        }
    </script>
    <style>
        body { background: #F8FAFC; color: #0F172A; }
        ::-webkit-scrollbar { width: 6px; }
        ::-webkit-scrollbar-track { background: transparent; }
        ::-webkit-scrollbar-thumb { background: #CBD5E1; border-radius: 3px; }
        aside::-webkit-scrollbar { width: 4px; }
        @keyframes fadeUp { from { opacity:0; transform:translateY(10px); } to { opacity:1; transform:translateY(0); } }
        .fade-up { animation: fadeUp 0.35s ease-out; }
        @keyframes slideR { from { opacity:0; transform:translateX(16px); } to { opacity:1; transform:translateX(0); } }
        .slide-r { animation: slideR 0.3s ease-out; }
        @keyframes pop { from { transform:scale(0.85); } to { transform:scale(1); } }
        .pop { animation: pop 0.15s ease-out; }
    </style>
</head>
<body>
    <div id="root"></div>

    <!-- Data -->
    <script>
        window.SECTIONS = [
            {
                id: "implementare",
                title: "Implementare Proiect",
                icon: "clipboard",
                color: "orange",
                keyIdeas: [
                    {
                        id: "impl-idea-1", icon: "clock",
                        title: "Buffer 30% la fiecare termen",
                        description: "Ad\u0103uga\u021bi un buffer de 30% la fiecare termen estimat din calendarul de implementare. Termenele str\u00e2nse sunt principala cauz\u0103 a \u00eent\u00e2rzierilor \u0219i penaliz\u0103rilor."
                    },
                    {
                        id: "impl-idea-2", icon: "alert",
                        title: "Realocare bugetar\u0103 peste 10% = act adi\u021bional \u00ceNAINTE",
                        description: "Orice realocare bugetar\u0103 peste 10% necesit\u0103 act adi\u021bional. Solicita\u021bi-l \u00ceNAINTE de efectuarea cheltuielii, nu dup\u0103. Cheltuielile f\u0103r\u0103 acoperire contractual\u0103 nu sunt eligibile."
                    },
                    {
                        id: "impl-idea-3", icon: "user",
                        title: "Persoan\u0103 dedicat\u0103 monitorizare termene",
                        description: "Desemna\u021bi o persoan\u0103 dedicat\u0103 pentru monitorizarea termenelor contractuale. Lipsa monitoriz\u0103rii duce la dep\u0103\u0219iri de termen \u0219i pierderea finan\u021b\u0103rii."
                    }
                ],
                examples: [
                    { id:"impl-ex-1", title:"Modificare buget f\u0103r\u0103 notificare", scenario:"O firm\u0103 beneficiar\u0103 realoc\u0103 15% din bugetul liniei de echipamente c\u0103tre linia de servicii, f\u0103r\u0103 a solicita act adi\u021bional la contractul de finan\u021bare.", problem:"Cheltuielile efectuate pe linia de servicii dep\u0103\u0219esc bugetul aprobat. La verificare, suma realocat\u0103 este declarat\u0103 neeligibil\u0103 \u0219i trebuie returnat\u0103 integral.", solution:"Depune\u021bi cerere de act adi\u021bional \u00ceNAINTE de efectuarea cheltuielii. Documenta\u021bi motiva\u021bia realoc\u0103rii \u0219i ob\u021bine\u021bi aprobarea scris\u0103 a AM/OI.", severity:"red" },
                    { id:"impl-ex-2", title:"Raport tehnic incomplet", scenario:"Beneficiarul depune raportul tehnic de progres cu descrieri generice ale activit\u0103\u021bilor.", problem:"Raportul este respins la verificare. Se solicit\u0103 clarific\u0103ri care \u00eent\u00e2rzie procesul de rambursare cu 2-3 luni.", solution:"Include\u021bi detalii concrete: date, loca\u021bii, persoane implicate, rezultate m\u0103surabile, indicatori atin\u0219i. Ata\u0219a\u021bi dovezi foto/documente suport.", severity:"amber" },
                    { id:"impl-ex-3", title:"Neasigurarea vizibilit\u0103\u021bii proiectului", scenario:"Beneficiarul nu aplic\u0103 elementele de identitate vizual\u0103 (logo UE, men\u021biunea finan\u021b\u0103rii) pe echipamentele achizi\u021bionate \u0219i la sediul proiectului.", problem:"La vizita de monitorizare se constat\u0103 lipsa elementelor de vizibilitate. Se aplic\u0103 corec\u021bie financiar\u0103 de 2-5% din valoarea proiectului.", solution:"Aplica\u021bi identitatea vizual\u0103 conform Manualului de Identitate Vizual\u0103 \u00eenc\u0103 de la \u00eenceputul implement\u0103rii. P\u0103stra\u021bi dovezi foto.", severity:"amber" }
                ],
                checklist: [
                    { id:"impl-ck-1", text:"Am verificat c\u0103 termenele din calendar au buffer de minim 30%" },
                    { id:"impl-ck-2", text:"Am solicitat act adi\u021bional pentru orice realocare bugetar\u0103 peste 10%" },
                    { id:"impl-ck-3", text:"Am desemnat o persoan\u0103 responsabil\u0103 cu monitorizarea termenelor" },
                    { id:"impl-ck-4", text:"Rapoartele tehnice con\u021bin activit\u0103\u021bi concrete, nu formul\u0103ri generice" },
                    { id:"impl-ck-5", text:"Elementele de identitate vizual\u0103 (logo UE, men\u021biune finan\u021bare) sunt aplicate" },
                    { id:"impl-ck-6", text:"Toate modific\u0103rile contractuale sunt documentate \u0219i aprobate" },
                    { id:"impl-ck-7", text:"Dosarul proiectului este complet \u0219i organizat cronologic" },
                    { id:"impl-ck-8", text:"Indicatorii de realizare sunt monitoriza\u021bi \u0219i raport\u0103\u021bi periodic" }
                ]
            },
            {
                id: "achizitii", title: "Achizi\u021bii Publice", icon: "cart", color: "blue",
                keyIdeas: [
                    { id:"ach-idea-1", icon:"alert", title:"NU fragmenta\u021bi achizi\u021biile", description:"Cumula\u021bi toate achizi\u021biile similare \u0219i aplica\u021bi procedura corect\u0103 conform pragurilor legale. Fragmentarea atrage corec\u021bii financiare de 25-100%." },
                    { id:"ach-idea-2", icon:"file", title:"Cerin\u021be de performan\u021b\u0103, NU brand-uri", description:"Descrie\u021bi cerin\u021be de performan\u021b\u0103, nu m\u0103rci comerciale. Ad\u0103uga\u021bi mereu \u00absau echivalent\u00bb dac\u0103 men\u021biona\u021bi un standard." },
                    { id:"ach-idea-3", icon:"folder", title:"P\u0103stra\u021bi TOATE documentele", description:"P\u0103stra\u021bi TOATE documentele din dosarul achizi\u021biei, inclusiv emailuri, clarific\u0103ri, notific\u0103ri. Dosarul incomplet este motiv de respingere." }
                ],
                mysimisRules: [
                    { id:"mys-1", text:"Documenta\u021bia de achizi\u021bie trebuie s\u0103 ajung\u0103 \u00een MySMIS \u00een cel mult 10 zile de la semnare.", urgency:"high", detail:"Dac\u0103 achizi\u021bia nu e verificat\u0103 din timp, nu putem finaliza verificarea cererii de rambursare." },
                    { id:"mys-2", text:"NU a\u0219tepta\u021bi cererea de rambursare pentru a \u00eenc\u0103rca contractele.", urgency:"high", detail:"Dac\u0103 a\u0219tepta\u021bi p\u00e2n\u0103 la depunerea cererii, v\u0103 semna\u021bi singuri sentin\u021ba pentru \u00eent\u00e2rzierea banilor." },
                    { id:"mys-3", text:"Actele adi\u021bionale necesit\u0103 \u00eenc\u0103rcare \u00een termen de 10 zile de la semnare.", urgency:"medium", detail:"Semna\u021bi, scana\u021bi, \u00eenc\u0103rca\u021bi \u0219i transmite\u021bi. Nu l\u0103sa\u021bi achizi\u021bia s\u0103 devin\u0103 g\u00e2tul de p\u00e2lnie al proiectului." }
                ],
                examples: [
                    { id:"ach-ex-1", title:"Fragmentarea achizi\u021biilor", scenario:"Beneficiarul achizi\u021bioneaz\u0103 echipamente IT \u00een 4 contracte separate de c\u00e2te 60.000 EUR, evit\u00e2nd procedura de licita\u021bie deschis\u0103.", problem:"Valoarea cumulat\u0103 de 240.000 EUR dep\u0103\u0219e\u0219te pragul. Se aplic\u0103 corec\u021bie financiar\u0103 de 100%.", solution:"Cumula\u021bi toate achizi\u021biile similare pe coduri CPV \u0219i aplica\u021bi procedura corespunz\u0103toare.", severity:"red" },
                    { id:"ach-ex-2", title:"Criterii restrictive de calificare", scenario:"Caietul de sarcini solicit\u0103 experien\u021b\u0103 de minim 5 contracte \u00een ultimii 2 ani, pentru o achizi\u021bie de 80.000 EUR.", problem:"Criteriul este dispropor\u021bionat. Se depune contesta\u021bie la CNSC, prelungind procedura cu 3-6 luni.", solution:"Stabili\u021bi criterii propor\u021bionale cu valoarea \u0219i complexitatea contractului.", severity:"red" },
                    { id:"ach-ex-3", title:"Modific\u0103ri substan\u021biale ale contractului", scenario:"Dup\u0103 atribuire, beneficiarul modific\u0103 40% din specifica\u021biile tehnice, f\u0103r\u0103 reluarea procedurii.", problem:"Modificarea este considerat\u0103 substan\u021bial\u0103. Se aplic\u0103 corec\u021bie financiar\u0103 pe \u00eentreaga valoare.", solution:"Evalua\u021bi dac\u0103 modificarea schimb\u0103 natura contractului. Modific\u0103ri substan\u021biale necesit\u0103 reluarea procedurii.", severity:"amber" }
                ],
                checklist: [
                    { id:"ach-ck-1", text:"Am cumulat toate achizi\u021biile similare (cod CPV) \u0219i am aplicat procedura corect\u0103" },
                    { id:"ach-ck-2", text:"Caietul de sarcini descrie cerin\u021be de performan\u021b\u0103, nu brand-uri" },
                    { id:"ach-ck-3", text:"Am ad\u0103ugat \u00absau echivalent\u00bb oriunde men\u021bionez un standard specific" },
                    { id:"ach-ck-4", text:"Criteriile de calificare sunt propor\u021bionale cu valoarea contractului" },
                    { id:"ach-ck-5", text:"Dosarul de achizi\u021bie este complet (inclusiv emailuri, clarific\u0103ri)" },
                    { id:"ach-ck-6", text:"Contractele au fost \u00eenc\u0103rcate \u00een MySMIS \u00een max. 10 zile de la semnare" },
                    { id:"ach-ck-7", text:"Actele adi\u021bionale sunt \u00eenc\u0103rcate \u00een MySMIS \u00een max. 10 zile" },
                    { id:"ach-ck-8", text:"Nu am fragmentat achizi\u021biile pentru a evita pragurile de procedur\u0103" },
                    { id:"ach-ck-9", text:"Procedura de atribuire respect\u0103 pragurile legale \u00een vigoare" }
                ]
            },
            {
                id: "verificari", title: "Verific\u0103ri Cereri de Plat\u0103", icon: "fileCheck", color: "emerald",
                keyIdeas: [
                    { id:"ver-idea-1", icon:"link", title:"Lan\u021b complet pentru fiecare cheltuial\u0103", description:"Asigura\u021bi lan\u021bul complet: contract \u2192 comand\u0103 \u2192 recep\u021bie \u2192 factur\u0103 \u2192 plat\u0103. Lipsa oric\u0103rei verigi duce la respingere." },
                    { id:"ver-idea-2", icon:"file", title:"Rapoarte cu activit\u0103\u021bi CONCRETE", description:"Rapoartele de activitate trebuie s\u0103 con\u021bin\u0103 activit\u0103\u021bi CONCRETE, cu date, rezultate m\u0103surabile \u0219i dovezi." },
                    { id:"ver-idea-3", icon:"check", title:"Auto-verificare intern\u0103 \u00eenainte de depunere", description:"Face\u021bi auto-verificare intern\u0103 complet\u0103 \u00eenainte de depunerea cererii de rambursare." }
                ],
                examples: [
                    { id:"ver-ex-1", title:"Lan\u021b documente incomplet", scenario:"Beneficiarul depune cererea de rambursare cu facturi \u0219i dovezi de plat\u0103, dar lipsesc procesele verbale de recep\u021bie.", problem:"Cheltuielile sunt respinse integral. Rambursarea \u00eent\u00e2rzie cu 2-4 luni.", solution:"Verifica\u021bi lan\u021bul complet \u00ceNAINTE de depunere: contract \u2192 recep\u021bie \u2192 factur\u0103 \u2192 plat\u0103.", severity:"red" },
                    { id:"ver-ex-2", title:"Cheltuieli personal nejustificate", scenario:"Rapoartele echipei con\u021bin doar men\u021bionarea zilelor lucrate, f\u0103r\u0103 activit\u0103\u021bi concrete.", problem:"Cheltuielile salariale sunt declarate neeligibile. Sumele trebuie returnate plus dob\u00e2nzi.", solution:"Rapoartele lunare trebuie s\u0103 detalieze activit\u0103\u021bi zilnice, rezultate, documente. Ata\u0219a\u021bi timesheet-uri.", severity:"red" },
                    { id:"ver-ex-3", title:"TVA declarat incorect", scenario:"Beneficiarul, pl\u0103titor de TVA, include TVA-ul ca cheltuial\u0103 eligibil\u0103.", problem:"TVA-ul recuperabil nu este eligibil. Se constat\u0103 supradeclarare \u0219i corec\u021bii.", solution:"Verifica\u021bi statutul TVA la FIECARE cerere. Ata\u0219a\u021bi Declara\u021bia pe propria r\u0103spundere.", severity:"amber" }
                ],
                checklist: [
                    { id:"ver-ck-1", text:"Lan\u021bul documente complet: contract \u2192 comand\u0103 \u2192 recep\u021bie \u2192 factur\u0103 \u2192 plat\u0103" },
                    { id:"ver-ck-2", text:"Rapoartele de activitate con\u021bin activit\u0103\u021bi concrete" },
                    { id:"ver-ck-3", text:"Am f\u0103cut auto-verificare intern\u0103 complet\u0103" },
                    { id:"ver-ck-4", text:"Statutul de pl\u0103titor/nepl\u0103titor TVA verificat \u0219i actual" },
                    { id:"ver-ck-5", text:"Declara\u021bia pe propria r\u0103spundere semnat\u0103 de RL" },
                    { id:"ver-ck-6", text:"Facturile \u00een format PDF din RO e-Factura" },
                    { id:"ver-ck-7", text:"Cursul valutar BNR documentat (la factur\u0103 \u0219i la plat\u0103)" },
                    { id:"ver-ck-8", text:"Codul SMIS pe facturi, extrase de cont \u0219i note contabile" },
                    { id:"ver-ck-9", text:"Codurile CPV \u00eenscrise pe facturile din achizi\u021bii publice" },
                    { id:"ver-ck-10", text:"Registrul Jurnal depus al\u0103turi de notele contabile" },
                    { id:"ver-ck-11", text:"Documentele contabile semnate de persoane abilitate" },
                    { id:"ver-ck-12", text:"Anexa 12 verificat\u0103 \u0219i conform\u0103" },
                    { id:"ver-ck-13", text:"Termenul de depunere a cererii de rambursare respectat" }
                ]
            },
            {
                id: "podcast", title: "PTJ la minut", icon: "headphones", color: "violet",
                episodes: [
                    { id:"ep1", title:"Banii sub lup\u0103", subtitle:"Episodul 1", accent:"#EA580C", topics:["Curs valutar","e-Factura","TVA"], slides:[
                        { title:"Cursul Valutar", icon:"\ud83d\udcb6", content:"Dac\u0103 ave\u021bi facturi \u00een alt\u0103 valut\u0103, regula este dou\u0103 cursuri BNR: unul la data emiterii facturii \u0219i unul la data pl\u0103\u021bii.", keyPoint:"Ambele cursuri trebuie documentate. Lipsa oric\u0103ruia duce la clarific\u0103ri \u0219i \u00eent\u00e2rzieri." },
                        { title:"Instruc\u021biunea 21 \u2014 Facturarea", icon:"\ud83d\udcd1", content:"Sunt acceptate DOAR facturile electronice \u00een format PDF generat direct din aplica\u021bia web RO e-Factura.", keyPoint:"NU scan\u0103ri. NU PDF-uri simple. DOAR PDF din e-Factura." },
                        { title:"TVA \u0219i Declara\u021bii", icon:"\ud83d\udd0d", content:"Statutul de pl\u0103titor/nepl\u0103titor TVA se verific\u0103 la FIECARE cerere \u2014 statutul se poate modifica!", keyPoint:"Ata\u0219a\u021bi Declara\u021bia pe propria r\u0103spundere semnat\u0103 de RL." }
                    ]},
                    { id:"ep2", title:"Identitatea Proiectului", subtitle:"Episodul 2", accent:"#0284C7", topics:["Codul SMIS","Coduri CPV","Extrase de cont"], slides:[
                        { title:"Codul SMIS \u2014 CNP-ul proiectului", icon:"\ud83c\udd94", content:"Codul SMIS trebuie s\u0103 apar\u0103 pe TOATE \u00eenregistr\u0103rile proiectului: facturi, extrase de cont, note contabile.", keyPoint:"F\u0103r\u0103 SMIS, dosarul se blocheaz\u0103 din cauza riscului de dubl\u0103 finan\u021bare." },
                        { title:"Achizi\u021bii Publice \u0219i CPV", icon:"\ud83c\udff7\ufe0f", content:"Dac\u0103 factura provine dintr-o achizi\u021bie public\u0103, Instruc\u021biunea 21 oblig\u0103 \u00eenscrierea codurilor CPV.", keyPoint:"F\u0103r\u0103 cod CPV corect pe factur\u0103 = factura NU este conform\u0103." },
                        { title:"Extrase de Cont \u0219i Anexa 12", icon:"\ud83c\udfe6", content:"Insista\u021bi ca \u0219i la detaliile pl\u0103\u021bii s\u0103 apar\u0103 codul SMIS. Verifica\u021bi Anexa 12 complet\u0103.", keyPoint:"Un cod SMIS \u0219i un cod CPV corecte scutesc o s\u0103pt\u0103m\u00e2n\u0103 de clarific\u0103ri." }
                    ]},
                    { id:"ep3", title:"Disciplina Contabil\u0103", subtitle:"Episodul 3", accent:"#7C3AED", topics:["Registru Jurnal","Semn\u0103turi"], slides:[
                        { title:"Registrul Jurnal", icon:"\ud83d\udccb", content:"Solicit\u0103m \u0219i Registrul Jurnal, nu doar notele contabile. Trebuie s\u0103 con\u021bin\u0103 toate notele aferente cererii.", keyPoint:"Registrul Jurnal = suma tuturor notelor contabile ale proiectului." },
                        { title:"Semn\u0103turile care conteaz\u0103", icon:"\u270d\ufe0f", content:"Semn\u0103tura de \u00eenc\u0103rcare a RL pe documentul contabil NU \u00eenseamn\u0103 asumarea situa\u021biei contabile.", keyPoint:"Documentele contabile trebuie semnate conform legii contabilit\u0103\u021bii." }
                    ]},
                    { id:"ep4", title:"Termene \u0219i Finalizare", subtitle:"Episodul 4", accent:"#059669", topics:["Termene","Checklist final"], slides:[
                        { title:"Termenul de Rambursare", icon:"\u23f0", content:"Urm\u0103ri\u021bi cu stricte\u021be termenul de depunere a cererii de rambursare aferente celei de plat\u0103.", keyPoint:"Nu l\u0103sa\u021bi pe ultima sut\u0103 de metri!" },
                        { title:"Checklist Final \u2014 Anexa 12", icon:"\ud83d\udcce", content:"Trece\u021bi totul prin filtrul Anexei 12 \u00eenainte de finalizare.", keyPoint:"Curs valutar \u2022 Cod SMIS \u2022 Facturi e-Factura + CPV \u2022 Registru Jurnal \u2022 Statut TVA \u2022 Anexa 12" }
                    ]}
                ]
            },
            {
                id: "audio", title: "Materiale Audio", icon: "mic", color: "rose",
                disclaimerText: "Proiect finan\u021bat de Uniunea European\u0103",
                disclaimerAlt: "Proiect cofinan\u021bat de Uniunea European\u0103",
                readingSpeed: "~2 cuvinte/secund\u0103",
                rules: [
                    "Materialele audio TREBUIE s\u0103 includ\u0103 declara\u021bia de finan\u021bare UE.",
                    "Declara\u021bia se cite\u0219te la SF\u00c2R\u0218ITUL produc\u021biei, cu ritm normal.",
                    "Textul obligatoriu: Proiect finan\u021bat/cofinan\u021bat de Uniunea European\u0103.",
                    "Ritmul recomandat: ~2 cuvinte/secund\u0103 \u2014 clar pentru public."
                ]
            }
        ];
    </script>

    <script type="text/babel">
        var { useState, useCallback, useMemo, useEffect } = React;
        var SECTIONS = window.SECTIONS;

        // ─── Hooks ───
        function useChecklist() {
            var KEY = "guide_checklists_v2";
            var [checked, setChecked] = useState(function() {
                try { var s = localStorage.getItem(KEY); return s ? JSON.parse(s) : {}; } catch(e) { return {}; }
            });
            var toggle = useCallback(function(id) {
                setChecked(function(prev) { var n = Object.assign({}, prev); n[id] = !n[id]; localStorage.setItem(KEY, JSON.stringify(n)); return n; });
            }, []);
            var isChecked = useCallback(function(id) { return !!checked[id]; }, [checked]);
            var getProgress = useCallback(function(sid) {
                var sec = SECTIONS.find(function(s){return s.id===sid;});
                if (!sec || !sec.checklist) return {done:0,total:0,percent:0};
                var t = sec.checklist.length;
                var d = sec.checklist.filter(function(i){return checked[i.id];}).length;
                return {done:d, total:t, percent: t ? Math.round((d/t)*100) : 0};
            }, [checked]);
            var resetSection = useCallback(function(sid) {
                var sec = SECTIONS.find(function(s){return s.id===sid;});
                if (!sec || !sec.checklist) return;
                setChecked(function(prev) { var n = Object.assign({}, prev); sec.checklist.forEach(function(i){delete n[i.id];}); localStorage.setItem(KEY, JSON.stringify(n)); return n; });
            }, []);
            return {toggle:toggle, isChecked:isChecked, getProgress:getProgress, resetSection:resetSection};
        }

        function useSearch() {
            var [query, setQuery] = useState("");
            var results = useMemo(function() {
                if (query.length < 2) return [];
                var q = query.toLowerCase(); var found = [];
                SECTIONS.forEach(function(sec) {
                    if (sec.keyIdeas) sec.keyIdeas.forEach(function(idea) {
                        if ((idea.title+idea.description).toLowerCase().includes(q)) found.push({sectionId:sec.id, sectionTitle:sec.title, type:"Idee cheie", text:idea.title, color:sec.color});
                    });
                    if (sec.examples) sec.examples.forEach(function(ex) {
                        if ([ex.title,ex.scenario,ex.problem,ex.solution].join(" ").toLowerCase().includes(q)) found.push({sectionId:sec.id, sectionTitle:sec.title, type:"Exemplu", text:ex.title, color:sec.color});
                    });
                    if (sec.checklist) sec.checklist.forEach(function(ck) {
                        if (ck.text.toLowerCase().includes(q)) found.push({sectionId:sec.id, sectionTitle:sec.title, type:"Checklist", text:ck.text, color:sec.color});
                    });
                    if (sec.episodes) sec.episodes.forEach(function(ep) {
                        ep.slides.forEach(function(slide) {
                            if ([slide.title,slide.content,slide.keyPoint].join(" ").toLowerCase().includes(q)) found.push({sectionId:sec.id, sectionTitle:sec.title, type:"Podcast", text:slide.title, color:sec.color});
                        });
                    });
                    if (sec.mysimisRules) sec.mysimisRules.forEach(function(r) {
                        if ((r.text+r.detail).toLowerCase().includes(q)) found.push({sectionId:sec.id, sectionTitle:sec.title, type:"MySMIS", text:r.text, color:sec.color});
                    });
                });
                return found;
            }, [query]);
            return {query:query, setQuery:setQuery, results:results};
        }

        // ─── Icons (simple SVGs) ───
        var IC = {
            clipboard: function(){return <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path d="M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2"/><rect x="8" y="2" width="8" height="4" rx="1"/></svg>;},
            cart: function(){return <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><circle cx="8" cy="21" r="1"/><circle cx="19" cy="21" r="1"/><path d="M2.05 2.05h2l2.66 12.42a2 2 0 0 0 2 1.58h9.78a2 2 0 0 0 1.95-1.57l1.65-7.43H5.12"/></svg>;},
            fileCheck: function(){return <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path d="M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z"/><path d="M14 2v4a2 2 0 0 0 2 2h4"/><path d="m9 15 2 2 4-4"/></svg>;},
            headphones: function(){return <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path d="M3 18v-6a9 9 0 0 1 18 0v6"/><path d="M21 19a2 2 0 0 1-2 2h-1a2 2 0 0 1-2-2v-3a2 2 0 0 1 2-2h3zM3 19a2 2 0 0 0 2 2h1a2 2 0 0 0 2-2v-3a2 2 0 0 0-2-2H3z"/></svg>;},
            mic: function(){return <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path d="M12 2a3 3 0 0 0-3 3v7a3 3 0 0 0 6 0V5a3 3 0 0 0-3-3Z"/><path d="M19 10v2a7 7 0 0 1-14 0v-2"/><line x1="12" x2="12" y1="19" y2="22"/></svg>;},
            search: function(){return <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2"><circle cx="11" cy="11" r="8"/><line x1="21" x2="16.65" y1="21" y2="16.65"/></svg>;},
            chevDown: function(){return <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2"><path d="m6 9 6 6 6-6"/></svg>;},
            chevUp: function(){return <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2"><path d="m18 15-6-6-6 6"/></svg>;},
            checkS: function(){return <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="white" strokeWidth="3"><path d="M20 6 9 17l-5-5"/></svg>;},
            clock: function(){return <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2"><circle cx="12" cy="12" r="10"/><polyline points="12 6 12 12 16 14"/></svg>;},
            alert: function(){return <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2"><path d="m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3"/><path d="M12 9v4"/><circle cx="12" cy="17" r="1"/></svg>;},
            user: function(){return <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2"><path d="M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2"/><circle cx="12" cy="7" r="4"/></svg>;},
            file: function(){return <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2"><path d="M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z"/><path d="M14 2v4a2 2 0 0 0 2 2h4"/></svg>;},
            folder: function(){return <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2"><path d="M4 20h16a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.93a2 2 0 0 1-1.66-.9l-.82-1.2A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13c0 1.1.9 2 2 2Z"/></svg>;},
            link: function(){return <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"/><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"/></svg>;},
            check: function(){return <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2"><path d="M20 6 9 17l-5-5"/></svg>;},
            menu: function(){return <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2"><line x1="4" x2="20" y1="12" y2="12"/><line x1="4" x2="20" y1="6" y2="6"/><line x1="4" x2="20" y1="18" y2="18"/></svg>;},
            x: function(){return <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2"><path d="M18 6 6 18"/><path d="m6 6 12 12"/></svg>;},
            arrowLeft: function(){return <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2"><path d="m12 19-7-7 7-7"/><path d="M19 12H5"/></svg>;},
        };
        function Icon(p) { var C = IC[p.name]; return C ? <C /> : null; }

        // ─── Color map ───
        var CM = {
            orange: { bg:"bg-orange-50", border:"border-orange-200", text:"text-orange-700", iconBg:"bg-orange-500", dot:"#F97316", light:"#FFF7ED", ring:"ring-orange-200" },
            blue:   { bg:"bg-blue-50", border:"border-blue-200", text:"text-blue-700", iconBg:"bg-blue-500", dot:"#3B82F6", light:"#EFF6FF", ring:"ring-blue-200" },
            emerald:{ bg:"bg-emerald-50", border:"border-emerald-200", text:"text-emerald-700", iconBg:"bg-emerald-500", dot:"#10B981", light:"#ECFDF5", ring:"ring-emerald-200" },
            violet: { bg:"bg-violet-50", border:"border-violet-200", text:"text-violet-700", iconBg:"bg-violet-500", dot:"#8B5CF6", light:"#F5F3FF", ring:"ring-violet-200" },
            rose:   { bg:"bg-rose-50", border:"border-rose-200", text:"text-rose-700", iconBg:"bg-rose-500", dot:"#F43F5E", light:"#FFF1F2", ring:"ring-rose-200" },
        };

        // ─── Components ───
        function ProgressBar(p) {
            return (
                <div className={p.size === "lg" ? "w-full bg-gray-100 rounded-full h-2.5" : "w-full bg-gray-100 rounded-full h-1.5"}>
                    <div className="h-full rounded-full transition-all duration-700 ease-out" style={{width:p.percent+"%", backgroundColor:CM[p.color] ? CM[p.color].dot : "#F97316"}} />
                </div>
            );
        }

        function CalloutBox(p) {
            var c = CM[p.color] || CM.orange;
            return (
                <div className={"rounded-2xl p-5 border transition-all hover:shadow-cardHover " + c.bg + " " + c.border}>
                    <div className="flex items-start gap-4">
                        <div className={c.iconBg + " w-10 h-10 rounded-xl flex items-center justify-center text-white shrink-0 shadow-soft"}>
                            <Icon name={p.idea.icon} />
                        </div>
                        <div>
                            <h4 className={"font-semibold text-sm mb-1 " + c.text}>{p.idea.title}</h4>
                            <p className="text-sm text-ink-700 leading-relaxed">{p.idea.description}</p>
                        </div>
                    </div>
                </div>
            );
        }

        function ExampleCard(p) {
            var [open, setOpen] = useState(false);
            var isRed = p.example.severity === "red";
            return (
                <div className="bg-white rounded-2xl border border-surface-200 shadow-card overflow-hidden transition-all hover:shadow-cardHover">
                    <button onClick={function(){setOpen(!open);}} className="w-full text-left p-5 flex items-center justify-between">
                        <div className="flex items-center gap-3">
                            <div className="w-2.5 h-2.5 rounded-full shrink-0" style={{backgroundColor: isRed ? "#EF4444" : "#F59E0B"}} />
                            <span className="font-semibold text-sm text-ink-900">{p.example.title}</span>
                        </div>
                        {open ? <IC.chevUp /> : <IC.chevDown />}
                    </button>
                    {open && (
                        <div className="px-5 pb-5 space-y-4 border-t border-surface-100 pt-4 fade-up">
                            <div><div className="text-[11px] font-bold text-blue-600 uppercase tracking-wider mb-1">Scenariu</div><p className="text-sm text-ink-700 leading-relaxed">{p.example.scenario}</p></div>
                            <div><div className="text-[11px] font-bold text-red-500 uppercase tracking-wider mb-1">Problema</div><p className="text-sm text-ink-700 leading-relaxed">{p.example.problem}</p></div>
                            <div><div className="text-[11px] font-bold text-emerald-600 uppercase tracking-wider mb-1">Solutie</div><p className="text-sm text-ink-700 leading-relaxed">{p.example.solution}</p></div>
                        </div>
                    )}
                </div>
            );
        }

        function ChecklistItem(p) {
            return (
                <button onClick={function(){p.onToggle(p.item.id);}}
                    className={p.isChecked
                        ? "w-full text-left p-4 rounded-xl border-2 transition-all flex items-start gap-3 bg-emerald-50 border-emerald-300"
                        : "w-full text-left p-4 rounded-xl border-2 transition-all flex items-start gap-3 bg-white border-surface-200 hover:border-orange-300 hover:shadow-card"}>
                    <div className={p.isChecked
                        ? "w-5 h-5 rounded-md flex items-center justify-center shrink-0 mt-0.5 bg-emerald-500 pop"
                        : "w-5 h-5 rounded-md border-2 flex items-center justify-center shrink-0 mt-0.5 border-gray-300"}>
                        {p.isChecked && <IC.checkS />}
                    </div>
                    <span className={p.isChecked ? "text-sm leading-relaxed text-emerald-700 line-through" : "text-sm leading-relaxed text-ink-800"}>
                        {p.item.text}
                    </span>
                </button>
            );
        }

        function ChecklistGroup(p) {
            var pr = p.checklist.getProgress(p.section.id);
            return (
                <div className="bg-white rounded-2xl border border-surface-200 shadow-card p-6">
                    <div className="flex items-center justify-between mb-4">
                        <h3 className="text-sm font-bold text-ink-900">Checklist Verificare</h3>
                        <div className="flex items-center gap-3">
                            <span className="text-xs font-mono text-ink-500">{pr.done}/{pr.total}</span>
                            {pr.done > 0 && <button onClick={function(){p.checklist.resetSection(p.section.id);}} className="text-xs text-red-500 hover:underline">Reset</button>}
                        </div>
                    </div>
                    <div className="mb-5"><ProgressBar percent={pr.percent} color="emerald" size="lg" /></div>
                    <div className="space-y-2">
                        {p.section.checklist.map(function(item) { return <ChecklistItem key={item.id} item={item} isChecked={p.checklist.isChecked(item.id)} onToggle={p.checklist.toggle} />; })}
                    </div>
                </div>
            );
        }

        function SlideViewer(p) {
            var [cur, setCur] = useState(0);
            useEffect(function(){ setCur(0); }, [p.episode.id]);
            var slides = p.episode.slides;
            var slide = slides[cur];
            return (
                <div className="bg-white rounded-2xl border border-surface-200 shadow-card overflow-hidden fade-up">
                    <div className="p-5 border-b border-surface-100 flex items-center justify-between" style={{borderBottomColor: p.episode.accent+"30"}}>
                        <div>
                            <span className="text-[11px] font-bold uppercase tracking-wider" style={{color:p.episode.accent}}>{p.episode.subtitle}</span>
                            <h4 className="font-bold text-lg text-ink-900">{p.episode.title}</h4>
                        </div>
                        <div className="flex items-center gap-2">
                            {p.episode.topics.map(function(t){ return <span key={t} className="text-[11px] px-2.5 py-1 rounded-full font-medium" style={{color:p.episode.accent, backgroundColor:p.episode.accent+"12"}}>{t}</span>; })}
                        </div>
                    </div>
                    <div className="p-6 min-h-[200px] slide-r" key={cur}>
                        <div className="flex items-center gap-3 mb-4">
                            <span className="text-3xl">{slide.icon}</span>
                            <h5 className="font-bold text-lg" style={{color:p.episode.accent}}>{slide.title}</h5>
                        </div>
                        <p className="text-sm text-ink-700 leading-relaxed mb-5">{slide.content}</p>
                        {slide.keyPoint && (
                            <div className="rounded-xl p-4 border" style={{backgroundColor:p.episode.accent+"08", borderColor:p.episode.accent+"25"}}>
                                <div className="text-[11px] font-bold uppercase tracking-wider mb-1" style={{color:p.episode.accent}}>Punct cheie</div>
                                <p className="text-sm text-ink-800 leading-relaxed font-medium">{slide.keyPoint}</p>
                            </div>
                        )}
                    </div>
                    <div className="p-4 border-t border-surface-100 flex items-center justify-between">
                        <button onClick={function(){setCur(Math.max(0,cur-1));}} disabled={cur===0} className="px-4 py-2 bg-surface-50 border border-surface-200 rounded-lg text-sm text-ink-500 hover:text-ink-800 disabled:opacity-30 transition-all">&#8592; Anterior</button>
                        <div className="flex gap-1.5">
                            {slides.map(function(_,i){ return <button key={i} onClick={function(){setCur(i);}} className="rounded-full transition-all" style={{width:i===cur?24:8, height:8, backgroundColor:i===cur?p.episode.accent:"#E2E8F0"}} />; })}
                        </div>
                        <button onClick={function(){setCur(Math.min(slides.length-1,cur+1));}} disabled={cur===slides.length-1} className="px-4 py-2 rounded-lg text-sm font-bold disabled:opacity-30 transition-all text-white shadow-soft" style={{backgroundColor:p.episode.accent}}>Urmator &#8594;</button>
                    </div>
                </div>
            );
        }

        function SectionHeader(p) {
            var c = CM[p.section.color] || CM.orange;
            return (
                <div className="flex items-center gap-4">
                    <div className={"p-3 rounded-2xl shadow-soft " + c.iconBg + " text-white"}><Icon name={p.section.icon} /></div>
                    <div>
                        <h2 className="text-2xl font-extrabold text-ink-900">{p.section.title}</h2>
                        {p.progress.total > 0 && (
                            <div className="flex items-center gap-3 mt-1.5">
                                <div className="w-36"><ProgressBar percent={p.progress.percent} color={p.section.color} /></div>
                                <span className="text-xs font-medium text-ink-500">{p.progress.done}/{p.progress.total} completat</span>
                            </div>
                        )}
                    </div>
                </div>
            );
        }

        function ContentSection(p) {
            return (
                <div className="space-y-8 fade-up">
                    {p.section.keyIdeas && (
                        <div><h3 className="text-xs font-bold uppercase tracking-wider text-ink-400 mb-4">Idei Cheie din Podcast</h3>
                        <div className="space-y-3">{p.section.keyIdeas.map(function(idea){return <CalloutBox key={idea.id} idea={idea} color={p.section.color} />;})}</div></div>
                    )}
                    {p.section.mysimisRules && (
                        <div><h3 className="text-xs font-bold uppercase tracking-wider text-ink-400 mb-4">Reguli MySMIS</h3>
                        <div className="space-y-3">{p.section.mysimisRules.map(function(rule){ return (
                            <div key={rule.id} className={rule.urgency==="high" ? "p-5 rounded-2xl border-2 border-red-200 bg-red-50" : "p-5 rounded-2xl border-2 border-amber-200 bg-amber-50"}>
                                <div className="flex items-start gap-3">
                                    <div className={rule.urgency==="high" ? "w-8 h-8 rounded-lg flex items-center justify-center shrink-0 text-sm font-bold bg-red-500 text-white" : "w-8 h-8 rounded-lg flex items-center justify-center shrink-0 text-sm font-bold bg-amber-500 text-white"}>{rule.urgency==="high"?"!":"i"}</div>
                                    <div><p className={rule.urgency==="high" ? "text-sm font-bold mb-1 text-red-700" : "text-sm font-bold mb-1 text-amber-700"}>{rule.text}</p><p className="text-sm text-ink-600 leading-relaxed">{rule.detail}</p></div>
                                </div>
                            </div>
                        );})}</div></div>
                    )}
                    {p.section.examples && (
                        <div><h3 className="text-xs font-bold uppercase tracking-wider text-ink-400 mb-4">Exemple Practice</h3>
                        <div className="space-y-3">{p.section.examples.map(function(ex){return <ExampleCard key={ex.id} example={ex} />;})}</div></div>
                    )}
                    {p.section.checklist && <ChecklistGroup section={p.section} checklist={p.checklist} />}
                </div>
            );
        }

        function PodcastSection(p) {
            var [activeEp, setActiveEp] = useState(null);
            return (
                <div className="space-y-6 fade-up">
                    <p className="text-sm text-ink-500 leading-relaxed">Serie de 4 episoade scurte care acoper&#259; verificarea financiar&#259; PTJ. Selecta&#539;i un episod.</p>
                    <div className="grid grid-cols-1 md:grid-cols-2 gap-4">
                        {p.section.episodes.map(function(ep,idx){ return (
                            <button key={ep.id} onClick={function(){setActiveEp(activeEp===ep.id?null:ep.id);}}
                                className={activeEp===ep.id
                                    ? "text-left p-5 rounded-2xl border-2 transition-all shadow-cardHover border-violet-300 bg-violet-50"
                                    : "text-left p-5 rounded-2xl border-2 transition-all bg-white border-surface-200 hover:shadow-cardHover hover:border-violet-200"}>
                                <div className="flex items-center gap-3 mb-3">
                                    <div className="w-10 h-10 rounded-full flex items-center justify-center font-bold text-sm text-white shadow-soft" style={{backgroundColor:ep.accent}}>{idx+1}</div>
                                    <div><div className="text-[11px] font-bold text-ink-400 uppercase tracking-wider">{ep.subtitle}</div><div className="font-bold text-ink-900">{ep.title}</div></div>
                                </div>
                                <div className="flex gap-1.5 flex-wrap">
                                    {ep.topics.map(function(t){return <span key={t} className="text-[11px] px-2 py-0.5 rounded-full font-medium" style={{color:ep.accent, backgroundColor:ep.accent+"12"}}>{t}</span>;})}
                                </div>
                            </button>
                        );})}
                    </div>
                    {activeEp && <SlideViewer episode={p.section.episodes.find(function(e){return e.id===activeEp;})} />}
                </div>
            );
        }

        function AudioSection(p) {
            return (
                <div className="space-y-6 fade-up">
                    <div className="bg-white rounded-2xl border-2 border-rose-200 shadow-card p-6">
                        <div className="flex items-center gap-3 mb-5">
                            <div className="w-12 h-12 rounded-2xl bg-rose-500 text-white flex items-center justify-center shadow-soft"><IC.mic /></div>
                            <div><h3 className="font-bold text-rose-700 text-lg">Disclaimer Obligatoriu</h3><p className="text-sm text-ink-500">Toate materialele audio trebuie sa includa acest text</p></div>
                        </div>
                        <div className="space-y-3 mb-5">
                            <div className="bg-rose-50 rounded-xl border border-rose-200 p-5"><div className="text-[11px] font-bold text-rose-600 uppercase tracking-wider mb-2">Varianta 1</div><p className="text-lg text-ink-900 font-medium italic">{p.section.disclaimerText}</p></div>
                            <div className="bg-orange-50 rounded-xl border border-orange-200 p-5"><div className="text-[11px] font-bold text-orange-600 uppercase tracking-wider mb-2">Varianta 2</div><p className="text-lg text-ink-900 font-medium italic">{p.section.disclaimerAlt}</p></div>
                        </div>
                        <div className="flex items-center gap-3"><span className="text-sm text-ink-500">Ritm de citire recomandat:</span><span className="inline-flex items-center px-3 py-1 rounded-full text-xs font-bold bg-rose-100 text-rose-700">{p.section.readingSpeed}</span></div>
                    </div>
                    <div className="bg-white rounded-2xl border border-surface-200 shadow-card p-6">
                        <h3 className="font-bold text-sm text-ink-900 mb-4">Reguli de aplicare</h3>
                        <div className="space-y-3">{p.section.rules.map(function(rule,i){ return (
                            <div key={i} className="flex items-start gap-3 p-4 bg-surface-50 rounded-xl">
                                <div className="w-6 h-6 rounded-lg bg-rose-100 text-rose-600 flex items-center justify-center text-xs font-bold shrink-0">{i+1}</div>
                                <p className="text-sm text-ink-700 leading-relaxed">{rule}</p>
                            </div>
                        );})}</div>
                    </div>
                </div>
            );
        }

        // ─── Sidebar ───
        function Sidebar(p) {
            var sectionsWithCL = SECTIONS.filter(function(s){return s.checklist;});
            var oDone = sectionsWithCL.reduce(function(sum,s){return sum+p.getProgress(s.id).done;},0);
            var oTotal = sectionsWithCL.reduce(function(sum,s){return sum+p.getProgress(s.id).total;},0);
            var oPct = oTotal ? Math.round(oDone/oTotal*100) : 0;

            return (
                <React.Fragment>
                    {p.mobileOpen && <div className="md:hidden fixed inset-0 bg-black/20 backdrop-blur-sm z-40" onClick={p.onMobileClose} />}
                    <aside className={p.mobileOpen
                        ? "fixed top-0 left-0 h-screen w-72 bg-white border-r border-surface-200 z-50 flex flex-col overflow-y-auto transition-transform duration-300 translate-x-0 shadow-2xl"
                        : "fixed top-0 left-0 h-screen w-72 bg-white border-r border-surface-200 z-50 flex flex-col overflow-y-auto transition-transform duration-300 -translate-x-full md:translate-x-0"}>

                        <div className="p-5 border-b border-surface-100">
                            <div className="flex items-center justify-between">
                                <div className="flex items-center gap-3">
                                    <div className="p-2.5 rounded-2xl bg-gradient-to-br from-orange-400 to-orange-600 shadow-soft text-white">
                                        <svg width="22" height="22" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2"><path d="M4 19.5v-15A2.5 2.5 0 0 1 6.5 2H20v20H6.5a2.5 2.5 0 0 1 0-5H20"/></svg>
                                    </div>
                                    <div><h1 className="font-extrabold text-lg text-ink-900 leading-tight">ABC-ul</h1><p className="text-xs text-orange-600 font-semibold">Implementarii</p></div>
                                </div>
                                <button onClick={p.onMobileClose} className="md:hidden p-1 text-ink-400 hover:text-ink-800"><IC.x /></button>
                            </div>
                        </div>

                        <div className="p-4">
                            <div className="relative">
                                <div className="absolute left-3 top-1/2 -translate-y-1/2 text-ink-400"><IC.search /></div>
                                <input type="text" value={p.searchQuery} onChange={function(e){p.onSearchChange(e.target.value);}}
                                    placeholder="Cauta in ghid..."
                                    className="w-full bg-surface-50 border border-surface-200 rounded-xl text-ink-800 px-3 py-2.5 pl-10 text-sm outline-none focus:border-orange-400 focus:ring-2 focus:ring-orange-100 transition-all" />
                            </div>
                        </div>

                        <nav className="flex-1 px-3 pb-4 space-y-0.5">
                            {SECTIONS.map(function(section){
                                var prog = p.getProgress(section.id);
                                var isActive = p.activeSection === section.id;
                                var c = CM[section.color] || CM.orange;
                                return (
                                    <div key={section.id}>
                                        <button onClick={function(){p.onNavigate(section.id); p.onMobileClose();}}
                                            className={isActive
                                                ? "w-full text-left px-3 py-2.5 rounded-xl flex items-center gap-3 text-sm transition-all font-semibold " + c.bg
                                                : "w-full text-left px-3 py-2.5 rounded-xl flex items-center gap-3 text-sm transition-all text-ink-500 hover:bg-surface-50 hover:text-ink-800"}
                                            style={isActive ? {color:c.dot} : {}}>
                                            <div className="shrink-0"><Icon name={section.icon} /></div>
                                            <span className="truncate flex-1">{section.title}</span>
                                            {prog.total > 0 && <span className="text-[11px] font-mono" style={{color:c.dot}}>{prog.percent}%</span>}
                                        </button>
                                        {isActive && prog.total > 0 && <div className="mx-3 mt-1 mb-1"><ProgressBar percent={prog.percent} color={section.color} size="sm" /></div>}
                                    </div>
                                );
                            })}
                        </nav>

                        <div className="p-4 border-t border-surface-100">
                            <div className="text-[11px] font-bold text-ink-400 uppercase tracking-wider mb-2">Progres Total</div>
                            <ProgressBar percent={oPct} color="orange" size="lg" />
                            <div className="flex justify-between mt-2"><span className="text-xs font-bold text-orange-600">{oPct}%</span><span className="text-[11px] text-ink-400">{oDone}/{oTotal}</span></div>
                        </div>

                        <div className="p-4 border-t border-surface-100">
                            <a href="index.html" className="flex items-center gap-2 text-xs text-ink-400 hover:text-orange-600 transition-colors font-medium">
                                <IC.arrowLeft /> Verificare IMM PTJ
                            </a>
                        </div>
                    </aside>
                </React.Fragment>
            );
        }

        function SearchResults(p) {
            return (
                <div className="md:ml-72 min-h-screen bg-surface-50 p-6 md:p-8 pt-20 md:pt-8">
                    <div className="max-w-3xl">
                        <h2 className="text-xl font-bold mb-1 text-ink-900">Rezultate pentru <span className="text-orange-600">{p.query}</span></h2>
                        <p className="text-sm text-ink-400 mb-6">{p.results.length} rezultate</p>
                        <div className="space-y-2">{p.results.map(function(r,i){ return (
                            <button key={i} onClick={function(){p.onNavigate(r.sectionId);}} className="w-full text-left p-4 bg-white rounded-xl border border-surface-200 hover:shadow-cardHover transition-all flex items-start gap-3">
                                <div className="w-2 h-2 rounded-full shrink-0 mt-2" style={{backgroundColor:(CM[r.color]||CM.orange).dot}} />
                                <div><div className="flex items-center gap-2 mb-1"><span className="text-[11px] font-bold uppercase tracking-wider" style={{color:(CM[r.color]||CM.orange).dot}}>{r.sectionTitle}</span><span className="text-[11px] text-ink-400">{r.type}</span></div><p className="text-sm text-ink-800">{r.text}</p></div>
                            </button>
                        );})}</div>
                    </div>
                </div>
            );
        }

        // ─── App ───
        function App() {
            var [activeSection, setActiveSection] = useState("implementare");
            var [mobileOpen, setMobileOpen] = useState(false);
            var checklist = useChecklist();
            var search = useSearch();

            var handleNavigate = function(sectionId) { setActiveSection(sectionId); search.setQuery(""); window.scrollTo(0,0); };
            var section = SECTIONS.find(function(s){return s.id===activeSection;});

            var mainContent;
            if (search.query.length >= 2 && search.results.length > 0) {
                mainContent = <SearchResults results={search.results} onNavigate={handleNavigate} query={search.query} />;
            } else if (search.query.length >= 2) {
                mainContent = (
                    <div className="md:ml-72 min-h-screen bg-surface-50 p-6 md:p-8 pt-20 md:pt-8">
                        <div className="max-w-3xl text-center py-20"><div className="text-5xl mb-4">&#128269;</div><h2 className="text-xl font-bold text-ink-900 mb-2">Niciun rezultat</h2><p className="text-sm text-ink-400">Incercati un alt termen.</p></div>
                    </div>
                );
            } else {
                mainContent = (
                    <div className="md:ml-72 min-h-screen bg-surface-50 pt-16 md:pt-0">
                        {section && (
                            <React.Fragment>
                                <div className="p-6 md:p-8 bg-white border-b border-surface-100"><SectionHeader section={section} progress={checklist.getProgress(section.id)} /></div>
                                <div className="p-6 md:p-8 max-w-3xl" key={activeSection}>
                                    {(section.id==="implementare"||section.id==="achizitii"||section.id==="verificari") && <ContentSection section={section} checklist={checklist} />}
                                    {section.id==="podcast" && <PodcastSection section={section} />}
                                    {section.id==="audio" && <AudioSection section={section} />}
                                </div>
                            </React.Fragment>
                        )}
                        <div className="p-6 md:p-8 border-t border-surface-100 text-center"><p className="text-xs text-ink-400">Ghid orientativ &#8212; Verificati ghidurile specifice ale programului</p></div>
                    </div>
                );
            }

            return (
                <div className="min-h-screen bg-surface-50 text-ink-900 font-sans">
                    <div className="md:hidden fixed top-0 left-0 right-0 z-30 bg-white/90 backdrop-blur-md border-b border-surface-200 px-4 py-3 flex items-center justify-between shadow-sm">
                        <button onClick={function(){setMobileOpen(true);}} className="p-1 text-ink-500 hover:text-ink-800"><IC.menu /></button>
                        <h1 className="font-bold text-sm text-ink-900">ABC-ul <span className="text-orange-600">Implementarii</span></h1>
                        <div className="w-6" />
                    </div>
                    <Sidebar activeSection={activeSection} onNavigate={handleNavigate} getProgress={checklist.getProgress} searchQuery={search.query} onSearchChange={search.setQuery} mobileOpen={mobileOpen} onMobileClose={function(){setMobileOpen(false);}} />
                    {mainContent}
                </div>
            );
        }

        var root = ReactDOM.createRoot(document.getElementById("root"));
        root.render(<App />);
    </script>
</body>
</html>
